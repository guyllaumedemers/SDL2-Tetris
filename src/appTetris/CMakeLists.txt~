# run try catch on dependencies

set(
	APP_TETRIS_BINARY_DIR
	"${CMAKE_BINARY_DIR}/bin"
)

set(
	APP_TETRIS_SOURCE_DIR
	"${CMAKE_SOURCE_DIR}/src/appTetris"
)

set(
	TARGET_TRY_RUN
	"${APP_TETRIS_SOURCE_DIR}/Main.cpp"
)

try_run(
	MAIN_CPP_RUN_RESULT
	MAIN_CPP_COMPILE_RESULT
	"${APP_TETRIS_BINARY_DIR}/test_output"
	"${TARGET_COMPILATION}"
)

if(NOT ${MAIN_CPP_COMPILE_RESULT})
	message(SEND_ERROR "SEND_ERROR! TARGET TRY COMPILATION FAILED : ${TARGET_TRY_RUN}")
elseif(NOT ${MAIN_CPP_RUN_RESULT})
	message(SEND_ERROR "SEND_ERROR! TARGET TRY RUN FAILED : ${TARGET_TRY_RUN}")
endif()
